<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CardioLens - Create an Account</title>
    {% load static %}
    <link rel='stylesheet' href="{% static 'CSS/signup.css' %}">
</head>
<body>
    <!-- Main Content -->
    <main>
        <div class="signup-container">
            <div class="signup-card">
                <div class="signup-header">
                    <h1>Create an Account</h1>
                    <p>Join CardioLens to monitor your heart health</p>
                </div>
                
                <form method='post' id="signup-form">
                    {% csrf_token %}
                    <div class="form-group">
                        {% comment %} <label for="name" class="form-label">Full Name</label>
                        <input id="name" type="text" class="form-control" placeholder="John Doe" required>
                        <div class="error-message" id="name-error"></div> {% endcomment %}
                        <label class="form-label" for="username">Username</label>
                        <input class="form-control" type="text" placeholder="Username" name="username" id="username" required>
                    </div>
                    
                    <div class="form-group">
                        {% comment %} <label for="email" class="form-label">Email</label>
                        <input id="email" type="email" class="form-control" placeholder="your.email@example.com" required>
                        <div class="error-message" id="email-error"></div> {% endcomment %}
                        <label class="form-label" for="email">Email</label>
                        <input class="form-control" type="email" placeholder="Email" name="email" id="email" required>
                    </div>
                    
                    {% comment %} <div class="form-group">
                        <label for="password" class="form-label">Password</label>
                        <div class="password-field">
                            <input id="password" type="password" class="form-control" placeholder="••••••••" required>
                            <button type="button" class="toggle-password" id="toggle-password">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
                                    <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
                                    <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
                                    <line x1="2" x2="22" y1="2" y2="22"></line>
                                </svg>
                            </button>
                        </div>
                        <div class="error-message" id="password-error"></div>
                    </div> {% endcomment %}
                    
                    <div class="form-group">
                        {% comment %} <label for="confirm-password" class="form-label">Confirm Password</label> {% endcomment %}
                        <label class="form-label" for="password1">Password</label>
                        <div class="password-field">
                            {% comment %} <input id="confirm-password" type="password" class="form-control" placeholder="••••••••" required> {% endcomment %}
                            <input class="form-control" type="password" placeholder="Password" id="password1" name="password1" required>
                            <button type="button" class="toggle-password" id="toggle-confirm-password">
                                {% comment %} <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
                                    <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
                                    <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
                                    <line x1="2" x2="22" y1="2" y2="22"></line>
                                </svg> {% endcomment %}
                            </button>
                        </div>
                        <div class="error-message" id="confirm-password-error"></div>
                    </div>

                    <div class="form-group">
                        {% comment %} <label for="confirm-password" class="form-label">Confirm Password</label> {% endcomment %}
                        <label class="form-label" for="password2">Confirm Password</label>
                        <div class="password-field">
                            {% comment %} <input id="confirm-password" type="password" class="form-control" placeholder="••••••••" required> {% endcomment %}
                            <input class="form-control" type="password" placeholder="Confirm Password" id="password2" name="password2" required>
                            <button type="button" class="toggle-password" id="toggle-confirm-password">
                                {% comment %} <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
                                    <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
                                    <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
                                    <line x1="2" x2="22" y1="2" y2="22"></line>
                                </svg> {% endcomment %}
                            </button>
                        </div>
                        <div class="error-message" id="confirm-password-error"></div>
                    </div>
                    
                    {% comment %} <button type="submit" class="btn btn-primary" id="submit-button"> {% endcomment %}
                        <button class="btn btn-primary" type="submit"> 
                        <span class="normal-state">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon">
                                <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                                <circle cx="9" cy="7" r="4"></circle>
                                <path d="M19 8v6"></path>
                                <path d="M16 11h6"></path>
                            </svg>
                        </span>
                        Submit
                    </button>
                </form>
                
                <div class="alert-warning">
                {% if messages %}
                {% for message in messages %}
                  <p>{{ message }}</p>
                {% endfor %}
              {% endif %}
                </div>
                
                <div class="login-link">
                    <p>
                        Already have an account?
                        <a href="{% url 'signin' %}">Sign in</a>
                    </p>
                </div>
                
                <div class="terms">
                    <p>
                        By creating an account, you agree to our
                        <a href="#">Terms of Service</a>
                        and
                        <a href="#">Privacy Policy</a>
                    </p>
                </div>
            </div>
        </div>
    </main>


    <!-- Toast Notification -->
    <div class="toast" id="toast">Account created successfully!</div>

    {% comment %} <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current year in footer
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            // Password visibility toggle
            const togglePassword = document.getElementById('toggle-password');
            const toggleConfirmPassword = document.getElementById('toggle-confirm-password');
            const passwordInput = document.getElementById('password');
            const confirmPasswordInput = document.getElementById('confirm-password');
            
            // Toggle password visibility
            togglePassword.addEventListener('click', function() {
                const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                passwordInput.setAttribute('type', type);
                
                // Toggle eye icon
                const eyeIcon = this.querySelector('svg');
                if (type === 'text') {
                    eyeIcon.innerHTML = `
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    `;
                } else {
                    eyeIcon.innerHTML = `
                        <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
                        <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
                        <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
                        <line x1="2" x2="22" y1="2" y2="22"></line>
                    `;
                }
            });
            
            // Toggle confirm password visibility
            toggleConfirmPassword.addEventListener('click', function() {
                const type = confirmPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                confirmPasswordInput.setAttribute('type', type);
                
                // Toggle eye icon
                const eyeIcon = this.querySelector('svg');
                if (type === 'text') {
                    eyeIcon.innerHTML = `
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    `;
                } else {
                    eyeIcon.innerHTML = `
                        <path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"></path>
                        <path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"></path>
                        <path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"></path>
                        <line x1="2" x2="22" y1="2" y2="22"></line>
                    `;
                }
            });
            
            // Form validation
            const form = document.getElementById('signup-form');
            const nameInput = document.getElementById('name');
            const emailInput = document.getElementById('email');
            
            const nameError = document.getElementById('name-error');
            const emailError = document.getElementById('email-error');
            const passwordError = document.getElementById('password-error');
            const confirmPasswordError = document.getElementById('confirm-password-error');
            
            const submitButton = document.getElementById('submit-button');
            const normalState = submitButton.querySelector('.normal-state');
            const loadingState = submitButton.querySelector('.loading');
            
            const toast = document.getElementById('toast');
            
            // Validation functions
            function validateName() {
                if (nameInput.value.trim().length < 2) {
                    nameError.textContent = 'Name must be at least 2 characters';
                    nameError.style.display = 'block';
                    return false;
                } else {
                    nameError.style.display = 'none';
                    return true;
                }
            }
            
            function validateEmail() {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!emailRegex.test(emailInput.value)) {
                    emailError.textContent = 'Please enter a valid email address';
                    emailError.style.display = 'block';
                    return false;
                } else {
                    emailError.style.display = 'none';
                    return true;
                }
            }
            
            function validatePassword() {
                if (passwordInput.value.length < 6) {
                    passwordError.textContent = 'Password must be at least 6 characters';
                    passwordError.style.display = 'block';
                    return false;
                } else {
                    passwordError.style.display = 'none';
                    return true;
                }
            }
            
            function validateConfirmPassword() {
                if (passwordInput.value !== confirmPasswordInput.value) {
                    confirmPasswordError.textContent = "Passwords don't match";
                    confirmPasswordError.style.display = 'block';
                    return false;
                } else {
                    confirmPasswordError.style.display = 'none';
                    return true;
                }
            }
            
            // Input validation on blur
            nameInput.addEventListener('blur', validateName);
            emailInput.addEventListener('blur', validateEmail);
            passwordInput.addEventListener('blur', validatePassword);
            confirmPasswordInput.addEventListener('blur', validateConfirmPassword);
            
            // Form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate all fields
                const isNameValid = validateName();
                const isEmailValid = validateEmail();
                const isPasswordValid = validatePassword();
                const isConfirmPasswordValid = validateConfirmPassword();
                
                if (isNameValid && isEmailValid && isPasswordValid && isConfirmPasswordValid) {
                    // Show loading state
                    normalState.style.display = 'none';
                    loadingState.style.display = 'flex';
                    submitButton.disabled = true;
                    
                    // Simulate form submission
                    setTimeout(function() {
                        // Show success toast
                        toast.classList.add('show');
                        
                        // Hide toast after 3 seconds
                        setTimeout(function() {
                            toast.classList.remove('show');
                            
                            // Redirect to login page
                            setTimeout(function() {
                                window.location.href = 'login.html';
                            }, 500);
                        }, 3000);
                    }, 1500);
                }
            });
        });
    </script> {% endcomment %}
</body>
</html>